##########################################
# Environment Variables for CodePush Server
##########################################

# ==============================
# Server Configuration (REQUIRED)
# ==============================
SERVER_URL=http://localhost:3000 # The URL of your server
PORT=3010 # Port on which the server will run

# ==============================
# Authentication (REQUIRED - at least one provider)
# ==============================

# --- GitHub OAuth ---
GITHUB_CLIENT_ID=     # GitHub OAuth client ID
GITHUB_CLIENT_SECRET= # GitHub OAuth client secret

# --- Microsoft OAuth ---
MICROSOFT_CLIENT_ID=     # Microsoft OAuth client ID
MICROSOFT_CLIENT_SECRET= # Microsoft OAuth client secret

# --- Google OAuth (Recommended) ---
GOOGLE_CLIENT_ID=     # Google OAuth client ID
GOOGLE_CLIENT_SECRET= # Google OAuth client secret

# --- Other authentication related env variables
LOGIN_AUTHORIZED_DOMAINS=abc.com,xyz.in # Comma seperated list of domains allowed for Google oAuth

# ==============================
# Database Configuration (REQUIRED)
# ==============================
DB_HOST=db # DB host endpoint, running on docker with container name 'db'
DB_USER=root # DB user name
DB_PASS=root # DB user password
DB_NAME=codepushdb # DB name

# ==============================
# Redis Configuration (REQUIRED)
# ==============================
REDIS_HOST=redis # Redis host endpoint, running on docker with container name 'redis'
REDIS_PORT=6379 # Redis host port
REDIS_CLUSTER_ENABLED=true # Set to 'true' to enable Redis cluster mode. Defaults to 'false' for single-node Redis instances. (Not required for local dev)
REDIS_TIMEOUT=100 # Connection timeout in milliseconds for Redis operations. Leave empty to use default timeout value (100).


# ==============================
# Storage Configuration (REQUIRED - select any)
# ==============================
EMULATED=false # Set to 'true' to use the local emulator

# --- AWS S3 storage configuration (Recommended)
AWS_ACCESS_KEY_ID=localstack # AWS access key ID for S3 authentication. For local development with LocalStack, use 'localstack'. For production, use your actual AWS access key ID from IAM.
AWS_SECRET_ACCESS_KEY=localstack # AWS secret access key for S3 authentication. For local development with LocalStack, use 'localstack'. For production, use your actual AWS secret access key from IAM.
S3_ENDPOINT=http://localstack:4566 # S3 service endpoint URL. For LocalStack development use 'http://localstack:4566'. For production AWS, leave empty to use default regional endpoints or specify a custom endpoint.
S3_BUCKETNAME= # Name of the S3 bucket to store Delivr OTA packages and metadata. Must be globally unique across all AWS accounts. Example: 'my-company-delivr-ota-bucket'
S3_REGION= # AWS region where the S3 bucket is located. Required for production AWS usage (e.g., 'us-east-1', 'eu-west-1', 'ap-south-1'). Can be left empty for LocalStack development.

# --- Azure Storage Configuration ---
AZURE_STORAGE_ACCOUNT=    # Azure storage account name
AZURE_STORAGE_ACCESS_KEY= # Azure storage access key (if KeyVault not used)

# ==============================
# Cloudfront configuration (not required for local dev setup for delivr-ota-server)
# ==============================
CLOUDFRONT_DOMAIN= # The CloudFront distribution domain name for serving delivr-ota packages (e.g., 'd123456789.cloudfront.net'). Not required for local development.

# ==============================
# Optional Configuration
# ==============================

# --- HTTPS Configuration ---
HTTPS= # Set to 'true' to enable HTTPS for local deployment

# --- Debugging Configuration ---
LOGGING=false            # Enable CodePush-specific logging
DEBUG_DISABLE_AUTH=false # Disable OAuth authentication route
DEBUG_USER_ID=           # Backend user ID for debugging session


# ==============================
# Unit Testing Configuration
# ==============================
TEST_AZURE_STORAGE=false # Run API unit tests against Azure storage
AZURE_ACQUISITION_URL=   # URL for acquisition tests

# ==============================
# Azure KeyVault Configuration (Optional)
# ==============================
AZURE_KEYVAULT_ACCOUNT=               # Azure KeyVault account name
CLIENT_ID=                            # Active Directory app client ID
CERTIFICATE_THUMBPRINT=               # AD app certificate thumbprint
REFRESH_CREDENTIALS_INTERVAL=86400000 # Credential refresh interval (in ms, default: 1 day)

# ==============================
# Other Configuration
# ==============================
DISABLE_ACQUISITION=false        # Disable acquisition routes
DISABLE_MANAGEMENT=false         # Disable management routes
ENABLE_ACCOUNT_REGISTRATION=true # Enable account registration
UPLOAD_SIZE_LIMIT_MB=200         # Max file upload size (in MB)
ENABLE_PACKAGE_DIFFING=false     # Enable generating diffs for releases
